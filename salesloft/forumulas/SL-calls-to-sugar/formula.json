{
    "active": true,
    "configuration": [
        {
            "description": "sugar",
            "key": "destination",
            "name": "destination",
            "required": false,
            "type": "elementInstance"
        },
        {
            "key": "salesloft",
            "name": "salesloft",
            "required": false,
            "type": "elementInstance"
        }
    ],
    "debugLoggingEnabled": false,
    "debugLoggingExpires": "2020-07-17T21:20:10Z",
    "engine": "v3",
    "id": 37624,
    "name": "SL calls to sugar",
    "singleThreaded": false,
    "steps": [
        {
            "name": "checkEvent",
            "onFailure": [
                "wrongEventExit"
            ],
            "onSuccess": [
                "getCallDetails"
            ],
            "properties": {},
            "type": "filter"
        },
        {
            "name": "getCallDetails",
            "onFailure": [
                "callNotFound"
            ],
            "onSuccess": [
                "getCalledPersonId"
            ],
            "properties": {
                "api": "/sl-calls/${trigger.event.objectId}",
                "elementInstanceId": "${config.salesloft}",
                "method": "GET"
            },
            "type": "elementRequest"
        },
        {
            "name": "getCalledPersonId",
            "onFailure": [
                "gracefulExit"
            ],
            "onSuccess": [
                "getPersonForPhoneCall"
            ],
            "properties": {},
            "type": "script"
        },
        {
            "name": "getPersonForPhoneCall",
            "onFailure": [],
            "onSuccess": [
                "lookupSugarRecord"
            ],
            "properties": {
                "api": "/sl-person/",
                "elementInstanceId": "${config.salesloft}",
                "method": "GET"
            },
            "type": "elementRequest"
        },
        {
            "name": "lookupSugarRecord",
            "onFailure": [],
            "onSuccess": [
                "createCallRecordSugar"
            ],
            "properties": {
                "api": "/sugar-contacts/${steps.getPersonRecord.sugar_id}",
                "elementInstanceId": "${config.destination}",
                "method": "GET"
            },
            "type": "elementRequest"
        },
        {
            "name": "createCallRecordSugar",
            "onFailure": [],
            "onSuccess": [],
            "properties": {
                "api": "/calls/",
                "elementInstanceId": "${config.destination}",
                "method": "POST"
            },
            "type": "elementRequest"
        },
        {
            "name": "gracefulExit",
            "onFailure": [],
            "onSuccess": [],
            "properties": {},
            "type": "script"
        },
        {
            "name": "callNotFound",
            "onFailure": [],
            "onSuccess": [],
            "properties": {},
            "type": "script"
        },
        {
            "name": "wrongEventExit",
            "onFailure": [],
            "onSuccess": [],
            "properties": {},
            "type": "script"
        }
    ],
    "triggers": [
        {
            "async": true,
            "name": "trigger",
            "onFailure": [],
            "onSuccess": [
                "checkEvent"
            ],
            "properties": {
                "elementInstanceId": "${config.salesloft}"
            },
            "type": "event"
        }
    ]
}