{
    "active": true,
    "configuration": [
        {
            "key": "destination",
            "name": "destination",
            "required": false,
            "type": "elementInstance"
        },
        {
            "key": "origin",
            "name": "origin",
            "required": false,
            "type": "elementInstance"
        }
    ],
    "debugLoggingEnabled": false,
    "engine": "v3",
    "id": 37550,
    "name": "Sugar Contact to SL Person 7-8-20",
    "singleThreaded": false,
    "steps": [
        {
            "name": "processEvent",
            "onFailure": [
                "getSugarLead"
            ],
            "onSuccess": [
                "getSugarContact"
            ],
            "properties": {},
            "type": "filter"
        },
        {
            "name": "getSugarContact",
            "onFailure": [],
            "onSuccess": [
                "createPersonFromContact"
            ],
            "properties": {
                "api": "/sugar-contacts/${trigger.event.objectId}",
                "elementInstanceId": "${config.origin}",
                "method": "GET"
            },
            "type": "elementRequest"
        },
        {
            "name": "createPersonFromContact",
            "onFailure": [],
            "onSuccess": [],
            "properties": {
                "api": "/sl-person",
                "body": "${steps.getSugarContact.response.body}",
                "elementInstanceId": "${config.destination}",
                "method": "POST"
            },
            "type": "elementRequest"
        },
        {
            "name": "getSugarLead",
            "onFailure": [],
            "onSuccess": [
                "prepCheckPersonQuery"
            ],
            "properties": {
                "api": "/sugar-leads/${trigger.event.objectId}",
                "elementInstanceId": "${config.origin}",
                "method": "GET"
            },
            "type": "elementRequest"
        },
        {
            "name": "prepCheckPersonQuery",
            "onFailure": [],
            "onSuccess": [
                "checkIfPersonExists"
            ],
            "properties": {},
            "type": "script"
        },
        {
            "name": "checkIfPersonExists",
            "onFailure": [
                "createPersonFromLead"
            ],
            "onSuccess": [
                "updatePersonFromLead"
            ],
            "properties": {
                "api": "/sl-person/",
                "elementInstanceId": "${config.destination}",
                "method": "GET",
                "query": "${steps.prepCheckPersonQuery.query}"
            },
            "type": "elementRequest"
        },
        {
            "name": "updatePersonFromLead",
            "onFailure": [],
            "onSuccess": [],
            "properties": {
                "api": "/sl-person/{$steps.checkIfPersonExists.body.response.id}",
                "body": "${steps.getSugarLead.response.body}",
                "elementInstanceId": "${config.destination}",
                "method": "PUT"
            },
            "type": "elementRequest"
        },
        {
            "name": "createPersonFromLead",
            "onFailure": [],
            "onSuccess": [],
            "properties": {
                "api": "/sl-person",
                "body": "${steps.getSugarLead.response.body}",
                "elementInstanceId": "${config.destination}",
                "method": "POST"
            },
            "type": "elementRequest"
        }
    ],
    "triggers": [
        {
            "async": true,
            "name": "trigger",
            "onFailure": [],
            "onSuccess": [
                "processEvent"
            ],
            "properties": {
                "elementInstanceId": "${config.origin}"
            },
            "type": "event"
        }
    ]
}